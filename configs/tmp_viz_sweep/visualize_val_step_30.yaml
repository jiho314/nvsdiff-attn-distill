# Creating visualize config file

# ... existing code ...
# NEW FILE CONTENTS
loss_query: all # all, target, reference
loss_key: all
loss_steps: [0, 5, 10, 15, 30, 49]

viz_query: all
viz_key: all
# viz_steps: [0, 5, 10, 15, 30, 49]
viz_steps: []
viz_log_wandb: false
viz_alpha: 0.6
viz_query_xy: null
viz_query_index: 342

# specify UNet layers using a range or list. examples: '2-12:2', '2,4,6'
unet_layers: "10"


# optional pair defaults - override defaults for each generated pair
pair_defaults:
  vggt_layer: point_map
  costmap_metric: neg_log_l2
  loss_fn:
    fn: cross_entropy
    head_mean: null # null -> headwise로 저장 / pre -> logit에 headmean을 하고 그 값으로 계산한 loss만 저장 / post -> headwise로 loss를 저장하고 -> 그 값을 평균낸 것만 저장 
  unet_logit_head_kwargs:
    softmax_temp: 1.0
  vggt_logit_head_kwargs:
    softmax_temp: 0.01
  loss_softmax_mode: per_view # global
  viz_softmax_mode: global # global
  
# ----- Tweedie background options -----
# set to 'tweedie' to use per-step tweedie VAE-decode background stored by the callback
viz_pred_bg_source: "tweedie"   # options: "tweedie" | "final"
viz_tweedie_decode_to_rgb: true
viz_defer_render: true

# Option to disable camera embeddings at pipeline/runtime. If set true,
# the pipeline will skip computing camera embeddings and pass only masks.
# This value can be overridden by command-line visualize_config or by
# validate.py which will copy it into `config.model_cfg['no_camera_emb']`.
no_camera_emb: false
# For testing: disable camera embeddings starting at a denoising step index (inclusive).
# If both are provided, `no_camera_emb_after_step` takes precedence.
# Example: no_camera_emb_after_step: 10
no_camera_emb_after_step: 30
